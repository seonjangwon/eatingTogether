<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>[뭐먹을까요:업체] 주문현황상세 </title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <style>

    </style>
</head>
<body>

<header>

</header>

<section>
    <span th:text="${session['storeLoginEmail']}"></span> 로그인

    <div id = "OrderNow">
        <li>
            <ul>
                <li>배달상태</li>   <p th:text="${order.orderNow}"></p>
                <li>업체명</li>    <p th:text="${order.storeName}"></p>
                <li>주문날짜</li>   <p th:text="${order.orderTime}"></p>
                <li>주문번호</li>   <p th:text="${order.orderNumber}"></p>
            </ul>
        </li>

    </div>
    <div id = "Menu">
            <ul th:each="m :${menu}">
                <li th:text="${m.menuName}"></li>
                <li th:text="${m.orderMenuCount}"></li>
                <li th:text="${m.orderMenuPrice}"></li>
            </ul>
    </div>
    <div id = "requestByCustomer">
        <li>
            <ul>
                <li>총금액</li> <p th:text="${order.orderPrice}"></p>
                <li>결제 방법</li><p th:text="${order.orderType}"></p>
                <li>주소</li><p th:text="${customer.customerAddress}"></p>
                <li>번호</li><p th:text="${customer.customerPhone}"></p>
                <li>사장님께</li><p th:text="${order.orderTomaster}"></p>
                <li>라이더님께</li><p th:text="${order.orderTorider}"></p>
            </ul>
        </li>
    </div>
    <div id = helloRider>
        <input type="button" value="배달요청" id="riderSelect" onclick="popUp()">
            <span id = "plz" style="display: none"> 배달요청 실행하면 나옵니다 </span>
        <a th:href="@{|/store/orderAll/${session['storeLoginEmail']}|}" class="btn btn-light btn-sm" tabindex="-1" id="orderFinish" role="button" style="display:none;" aria-disabled="true"> 처리완료 </a>
            <!--<input type="button" value="주문처리" id="orderFinish" style="display:none;" on="">-->
            </form>
    </div>

</section>
</body>

<script>
    //팝업을 합니다.
    function popUp()    {
        const orderNum = '[[${order.orderNumber}]]';
        window.open("/store/riderList/"+orderNum,"riderList","width=400, height=300, left=100, top=50");
        console.log("팝업누름");
    }

    //팝업창의 데이터를 가져옵니다.
    function getPopupData(riderNumber,riderName){
        const plz = document.getElementById('plz');
        plz.innerHTML = riderName+"님께 배달출발요청 하였습니다.";

        $("#plz").show();
        $("#riderSelect").hide();
        $("#orderFinish").show();

    }

</script>
</html>