<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="/css/layout2.css" rel="stylesheet" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title>ë¦¬ë·°ê´€ë¦¬</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script>
        $(document).ready(function(){
            $(".all").show();
            $(".replyFinish").hide();
            $(".notReply").hide();
        })

        function replyBtn() {
            $(".replyFinish").show();
            $(".notReply").hide();
            $(".all").hide();
        }

        function notReplyBtn() {
            $(".notReply").show();
            $(".replyFinish").hide();
            $(".all").hide();
        }
    </script>

    <style>
        form {
            display: inline;
        }

        /*-------------- ë§í¬ ---------------*/
        a {
            text-decoration-line: none;
        }

        /* í•˜ì´í¼ë§í¬ ê¾¸ë°ˆìš”ì†Œ ì‚­ì œ */
        a:link {
            color: sandybrown;
        }

        /* í•˜ì´í¼ë§í¬ ê´€ë ¨ */
        a:visited {
            color: sandybrown;
        }

        a:hover {
            color: coral;
        }

        a:active {
            color: deeppink;
        }

        /*---------- left bar -----------*/
        .leftMenuBarScroll{       /*ë‚´ìš©ë§ì•„ì§€ë©´ ìŠ¤í¬ë¡¤*/
            font-family: 'Yeongdo-Rg';
            position: sticky;
            /*position: sticky;*/
            font-size: larger;
            display: inline-block;
            top: 0%;
            transform: translate(0,50%);
            color: sandybrown;
        }

        .lmp {
            font-family: 'LeeSeoyun';
            position: relative;
            font-size: larger;
            display: inline-block;
            transform: translate(0, 0%);
            color: sandybrown;
        }

        .contentsArea {
            margin-bottom: 5%;
        }

        #contents1 {
            font-family: 'LeeSeoyun';
            border: 0.5px solid;
            border-color: coral;
            border-radius: 0.5rem;
            margin: 5px;
            min-height: 100px;
            width: 80%;
            display: grid;
            grid-template-rows: 1fr;
            /*grid-template-columns: 1fr 2fr;*/
            padding: 10px;
            /*padding-top: 10px;
            padding-bottom: 10px;*/
        }

        #contents2 {
            font-family: 'LeeSeoyun';
            border: 0.5px solid;
            border-color: coral;
            border-radius: 0.5rem;
            margin: 5px;
            min-height: 100px;
            width: 80%;
            display: grid;
            grid-template-rows: 1fr;
            /*grid-template-columns: 1fr 2fr;*/
            padding: 10px;
            /*padding-top: 10px;
            padding-bottom: 10px;*/
        }

        #contents3 {
            font-family: 'LeeSeoyun';
            border: 0.5px solid;
            border-color: coral;
            border-radius: 0.5rem;
            margin: 5px;
            min-height: 100px;
            width: 80%;
            display: grid;
            grid-template-rows: 1fr;
            /*grid-template-columns: 1fr 2fr;*/
            padding: 10px;
            /*padding-top: 10px;
            padding-bottom: 10px;*/
        }

        .review1 {
            text-align: right;
            margin-right: 10px;
        }

        .review1-2 {
            margin: 5px;
            display: grid;
            /*grid-template-rows: 1fr 2fr;*/
            grid-template-columns: 1fr 2fr;
            padding-top: 10px;
            padding-bottom: 10px;
        }

        .commentArea {
            font-family: 'LeeSeoyun';
            background-color: #ffcccc;
            border-radius: 0.5rem;
            margin: 5px;
            min-height: 100px;
            width: 80%;
            display: grid;
            /*grid-template-columns: 1fr 3fr;*/
            grid-template-rows: 0.3fr 1fr;
            padding: 10px;
        }

        .commentByOwner {
            width: 90%;
        }

        .standText {
            font-family: 'Cafe24SsurroundAir';
            font-size: 16px;
            color: sandybrown;
            font-weight: bolder;
            margin: 3px;
        }

        .line {
            border: coral;
            border-style: solid;
            border-bottom: 0px;
            text-align: left;
            margin-left: 0;
        }
    </style>
<body>
<header>
    <div class="container">
        <div class="row">
            <div class="col-3">
                <span id=logoTitle>
                    <h3><a href="/"> ğŸ™ ë­ë¨¹ì„ê¹Œìš”?</a></h3>
                </span>
            </div>
            <div class="col-2">
                <!-- ê³µë°±ë€ -->
            </div>
            <div class="col-2">
            </div>
            <div class="col-4">
                <span id="menuBar-text">
                    <div th:if="${session.storeLoginEmail}">
                        <a href="/usual/logout">ë¡œê·¸ì•„ì›ƒ</a>
                        <a th:href="@{|/store/menuControl/${session['storeLoginEmail']}|}">ë©”ë‰´ê´€ë¦¬</a>
                        <a th:href="@{|/store/orderAll/${session['storeLoginEmail']}|}"> ì£¼ë¬¸ê´€ë¦¬</a>
                        <a href="/storeMain"> ìŠ¤í† ì–´ê´€ë¦¬ </a>
                    </div><!-- ì—…ì²´ë¡œê·¸ì¸ì‹œ -->
                </span>
            </div>
            <div class="col" id="menuBar-friPan">
                <a href="#" class="btn btn-light btn-sm " tabindex="-1" role="button" aria-disabled="true">ğŸ³</a>
            </div>
        </div>
    </div>
</header><!--header ìˆ˜ì •ì™„ë£Œ-->
<section>
    <div class="container-section-1">
        <div class="leftMenuBarScroll">
            <p class="lmp" onclick="replyBtn()">ë‹µë³€ì™„ë£Œ</p><br>
            <p class="lmp" onclick="notReplyBtn()">ë¯¸ë‹µë³€</p>
        </div>
        <div class="rightContainer">
            <div class="all"> all
                <div class="contentsArea" th:each="r: ${reviewList}">
                    <form class="row g-3">
                        <div class="row" id="contents1">
                            <div id="reviewArea">
                                <h5><span class="standText" th:text="${r.customerName}"></span>ë‹˜ì´ ì‘ì„±í•´ì£¼ì…¨ìŠµë‹ˆë‹¤</h5>
                                <div class="review1">
                                    ì‘ì„±ì‹œê°„ <span th:text="${r.reviewTime}"></span>
                                </div>
                                <hr class="line">
                                <div class="review1-2">
                                    <div class="review3">
                                        <span th:each="rf : ${r.reviewFileDTOList}">
                                            <img th:src="@{|/upload/review/${rf.reviewFilename}|}" alt="ã…" width="150px"
                                                 height="150px">
                                        </span>
                                    </div>
                                    <div class="review2">
                                        ì£¼ë¬¸ë©”ë‰´: <span th:text="${r.menuName}"></span><br>
                                        <!--<span th:if="${r.reviewScore==5}"><span>ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                        <span th:if="${r.reviewScore==4}"><span>ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                        <span th:if="${r.reviewScore==3}"><span>ğŸ™ğŸ™ğŸ™</span></span>
                                        <span th:if="${r.reviewScore==2}"><span>ğŸ™ğŸ™</span></span>
                                        <span th:if="${r.reviewScore==1}"><span>ğŸ™</span></span>-->


                                        &lt;!&ndash;ë³„ì : <span th:text="${r.reviewScore}"></span>ì &ndash;&gt;
                                        <span th:text="${r.reviewComments}"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <div class="commentArea">
                        <h5><span class="standText"> ì‚¬ì¥ë‹˜ ë‹µê¸€ </span></h5>
                        <div th:if="${r.replyDetailDTO == null}">
                            <form action="/review/reply" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <input type="hidden" name="reviewNumber" th:value="${r.reviewNumber}">
                                <textarea class="commentByOwner" name="replyContents"></textarea><br>
                                <input type="submit" class="btn btn-light btn-sm" value="ëŒ“ê¸€ë“±ë¡">
                            </form>
                        </div>
                        <div th:if="${r.replyDetailDTO != null}">
                            <span th:text="${r.replyDetailDTO.replyContents}"></span>
                        </div>
                    </div>
                </div>

            </div>
            <div class="replyFinish">
                <div class="contentsArea" th:each="r: ${reviewList}">
                    <!--<div class="test123" th:if="${r.replyDetailDTO != null}">-->
                    <!--<div class="test123" th:if="${not #strings.isEmpty(r.replyDetailDTO)}" th:text="${r.replyDetailDTO.replyNumber}">-->
                    <!--<div class="test123" th:if="${not #strings.isEmpty(r.replyDetailDTO)}"
                         th:text="${r.replyDetailDTO.replyNumber}">-->
                    <div class="test123" th:if="${r.replyNumber != null}">
                        <form class="row g-3">
                            <div class="row" id="contents2">
                                <div class="reviewArea">
                                    <h5><span class="standText" th:text="${r.customerName}"></span>ë‹˜ì´ ì‘ì„±í•´ì£¼ì…¨ìŠµë‹ˆë‹¤</h5>
                                    <div class="review1">
                                        ì‘ì„±ì‹œê°„ <span th:text="${r.reviewTime}"></span>
                                    </div>
                                    <hr class="line">
                                    <div class="review1-2">
                                        <div class="review3">
                                        <span th:each="rf : ${r.reviewFileDTOList}">
                                            <img th:src="@{|/upload/review/${rf.reviewFilename}|}" alt="ã…" width="150px"
                                                 height="150px">
                                        </span>
                                        </div>
                                        <div class="review2">
                                            ì£¼ë¬¸ë©”ë‰´: <span th:text="${r.menuName}"></span><br>
                                            <span th:if="${r.reviewScore==5}"><span>ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==4}"><span>ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==3}"><span>ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==2}"><span>ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==1}"><span>ğŸ™</span></span>


                                            <!--ë³„ì : <span th:text="${r.reviewScore}"></span>ì -->
                                            <span th:text="${r.reviewComments}"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="commentArea">
                            <h5><span class="standText"> ì‚¬ì¥ë‹˜ ë‹µê¸€ </span></h5>
                            <span th:text="${r.replyDetailDTO.replyContents}"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="notReply">
                <div class="contentsArea" th:each="r: ${reviewList}">
                    <div class="test123" th:if="${r.replyNumber == null}">
                        <form class="row g-3">
                            <div class="row" id="contents3">
                                <div class="reviewArea">
                                    <h5><span class="standText" th:text="${r.customerName}"></span>ë‹˜ì´ ì‘ì„±í•´ì£¼ì…¨ìŠµë‹ˆë‹¤</h5>
                                    <div class="review1">
                                        ì‘ì„±ì‹œê°„ <span th:text="${r.reviewTime}"></span>
                                    </div>
                                    <hr class="line">
                                    <div class="review1-2">
                                        <div class="review3">
                                        <span th:each="rf : ${r.reviewFileDTOList}">
                                            <img th:src="@{|/upload/review/${rf.reviewFilename}|}" alt="ã…" width="150px"
                                                 height="150px">
                                        </span>
                                        </div>
                                        <div class="review2">
                                            ì£¼ë¬¸ë©”ë‰´: <span th:text="${r.menuName}"></span><br>
                                            <!--<span th:if="${r.reviewScore==5}"><span>ğŸ™ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==4}"><span>ğŸ™ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==3}"><span>ğŸ™ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==2}"><span>ğŸ™ğŸ™</span></span>
                                            <span th:if="${r.reviewScore==1}"><span>ğŸ™</span></span>-->


                                            <!--ë³„ì : <span th:text="${r.reviewScore}"></span>ì -->
                                            <span th:text="${r.reviewComments}"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="commentArea">
                            <h5><span class="standText"> ì‚¬ì¥ë‹˜ ë‹µê¸€ </span></h5>
                            <!--<div th:if="${r.replyNumber == null}">-->
                            <form action="/review/reply" method="post">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <!--<input type="hidden" name="reviewNumber" th:value="${r.reviewNumber}">-->
                                <textarea class="commentByOwner" name="replyContents"></textarea><br>
                                <input type="submit" class="btn btn-light btn-sm" value="ëŒ“ê¸€ë“±ë¡">
                            </form>
                            <!--</p>-->
                        </div>
                    </div>
                </div>
            </div>
            </div>
        </div>
        <!----------------------------------- ëŒ“ê¸€ì„ ì•ˆë‹¬ì•˜ì„ ë•Œ ----------------------------------------->
    </div>
</section>
<div id="msgStack"></div>
<footer>

</footer>
</body>
<script src="/js/webSocket.js"></script>
</html>