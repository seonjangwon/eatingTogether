<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title>[뭐먹을까요:업체] 판매현황 </title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <style>
        .orderListDetail {
            width: 600px;
        }
    </style>
</head>
<body>
<section id="orderMenuArea">
    <!--<span th:text="${session['storeLoginEmail']}"></span> ㅎ2-->
    들어온 주문<br>
    배달완료<br>
</section>
<section class="orderListDetail">
    <div> 메인내용 </div><br>
    <button onclick="monthView()"> 월 매출 </button>
    <button onclick="dailyView()"> 오늘의 매출 </button>

    <div id = "month_sale" >
    <h2>3월매출</h2>
        <div id ="saleList">
            <table id = "monthSaleTable">
                <thead>
                    <tr>
                        <th> 날짜 </th>
                        <th> 금액 </th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="s:${sale}">
                        <td th:text="${s.storeNumber}"></td>
                        <td th:text="${s.dailySaleTime}"></td>
                        <td th:text="${s.dailySalePrice}"></td>
                    </tr>
                </tbody>
            </table>
                <!--<td th:text="${sale[0].dailySalePrice}"></td>-->
            <!-- controller에서 list로 보내진건 index 지정 후에 불러 올 수 있음 -->
            <button onclick="sumMonthSale()"> 총액 </button>
            <div id="sum"></div>
        </div>
    </div>
    <br>
    <div id = "daily_sale" style="display: none">
    일매출
        <table id = dailySaleTable>
            <thead>
                <th> 주문번호 </th>
                <th> 주문시간 </th>
                <th> 메뉴 </th>
                <th> 주문금액 </th>
                <th> 고객번호 </th>
            </thead>
            <tbody>
                <tr th:each="od:${order}">
                    <td th:text="${od.orderNumber}"></td>
                    <td th:text="${od.orderTime}"></td>
                    <td th:text="${od.menuName}"></td>
                    <td th:text="${od.orderPrice}"></td>
                    <td th:text="${od.customerNumber}"></td>
                </tr>
            </tbody>
        </table>
    </div>
    <br>
</section>
</body>
<script>
    function monthView()  {
        console.log("month버튼 누름")
        $("#month_sale").show();
        $("#daily_sale").hide();
    }

    function dailyView()  {
        console.log("month버튼 누름")
        $("#month_sale").hide();
        $("#daily_sale").show();
    }

    //금액을 결산
    function sumMonthSale(){
        const table = document.getElementById('monthSaleTable');
        console.log(table);

        //합계계산
        let sum = 0;
        for (let i= 1; i < table.rows.length; i++)  {
            sum+= parseInt(table.rows[i].cells[1].innerHTML);
        }
        document.getElementById('sum').innerText =sum;
    }
</script>
</html>