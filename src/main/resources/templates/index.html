<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>[뭐먹을까요] 어서오세요</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
</head>
<body>

<h1>ET</h1>
    <a href = "/usual/customer"> 회원가입 </a><br>
    <a href="/usual/customerLogin"> 로그인 </a><br>
    <a href="/store/category"> 카테고리(임시)</a>
<br>
    <a href="storeMain"> ❤ </a>

<a href="/usual/customer">회원가입</a>
<a href="/usual/logout">로그아웃</a>
<a href="/admin">관리자</a>
<a href="/customer/basket">장바구니</a><br>
<a href="/customer/kakaoLogout">카카오 로그아웃</a>
<div id="msgStack"></div>
<button onclick="send_btn()">웹소켓 전송 테스트</button>
</body>
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script>

    let socket = new WebSocket("ws://localhost:8099//ws/chat");
    socket.onopen = function (e) {
        console.log('open server!')
    };

    socket.onmessage = function (msg) {
        var data = msg.data;
        let toast = "<div class=\"toast\" role=\"alert\" aria-live=\"assertive\" aria-atomic=\"true\">";
        toast += "<div class='toast-header'><img src=\"...\" class=\"rounded me-2\" alt=\"...\"><strong class=\"me-auto\">Bootstrap</strong>";
        toast += "<button type='button' class='ml-2 mb-1 close' data-dismiss='toast' aria-label='Close'>";
        toast += "<button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"toast\" aria-label=\"Close\"></button>";
        toast += "</div> <div class='toast-body'>" + data + "</div></div>";
        $("#msgStack").append(toast);   // msgStack div에 생성한 toast 추가
        $(".toast").toast({"animation": true, "autohide": false});
        $('.toast').toast('show');
    };

    const send_btn = () =>{
        var target = "qwe"
        var type = "1";
        socket.send(target+","+type);
    }

</script>
</html>